{ system ? builtins.currentSystem }:

rec {
  path = "@testPath@";

  mkDerivation = args:
    derivation ({
      inherit system;
      PATH = path;
    } // args);
  mkContentAddressedDerivation = args: mkDerivation ({
    __contentAddressed = true;
    outputHashMode = "recursive";
    outputHashAlgo = "sha256";
  } // args);
}
